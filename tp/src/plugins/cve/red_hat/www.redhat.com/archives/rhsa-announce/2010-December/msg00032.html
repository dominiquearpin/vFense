<!-- MHonArc v2.6.16 -->
<!--X-Subject: [RHSA&#45;2010:0998&#45;01] Low: kvm security and bug fix update -->
<!--X-From-R13: ohtmvyynNerqung.pbz -->
<!--X-Date: Mon, 20 Dec 2010 12:55:16 &#45;0500 -->
<!--X-Message-Id: 201012201755.oBKHtAEF025509@int&#45;mx10.intmail.prod.int.phx2.redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!--#include virtual="/header.html"-->
<!--#include virtual="/search.html"-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>[RHSA-2010:0998-01] Low: kvm security and bug fix update</TITLE>
<LINK REV="made" HREF="mailto:bugzilla redhat com">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<a href="msg00031.html">Date Prev</a>][<a href="msg00033.html">Date Next</a>] &nbsp; [<a href="msg00031.html">Thread Prev</a>][<a href="msg00033.html">Thread Next</a>] &nbsp; 
[<A HREF="thread.html#00032">Thread Index</A>]
[<A HREF="date.html#00032">Date Index</A>]
[<A HREF="author.html#00032">Author Index</A>]

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[RHSA-2010:0998-01] Low: kvm security and bug fix update</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>From</em>: bugzilla redhat com</li>
<li><em>To</em>: rhsa-announce redhat com, enterprise-watch-list redhat com</li>
<li><em>Subject</em>: [RHSA-2010:0998-01] Low: kvm security and bug fix update</li>
<li><em>Date</em>: Mon, 20 Dec 2010 12:56:36 -0500</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

=====================================================================
                   Red Hat Security Advisory

Synopsis:          Low: kvm security and bug fix update
Advisory ID:       RHSA-2010:0998-01
Product:           Red Hat Enterprise Linux
Advisory URL:      <a  rel="nofollow" href="https://rhn.redhat.com/errata/RHSA-2010-0998.html">https://rhn.redhat.com/errata/RHSA-2010-0998.html</a>
Issue date:        2010-12-20
CVE Names:         CVE-2010-3881 
=====================================================================

1. Summary:

Updated kvm packages that fix one security issue and three bugs are now
available for Red Hat Enterprise Linux 5.

The Red Hat Security Response Team has rated this update as having low
security impact. A Common Vulnerability Scoring System (CVSS) base score,
which gives a detailed severity rating, is available from the CVE link in
the References section.

2. Relevant releases/architectures:

RHEL Desktop Multi OS (v. 5 client) - x86_64
RHEL Virtualization (v. 5 server) - x86_64

3. Description:

KVM (Kernel-based Virtual Machine) is a full virtualization solution for
Linux on AMD64 and Intel 64 systems. KVM is a Linux kernel module built for
the standard Red Hat Enterprise Linux kernel.

It was found that some structure padding and reserved fields in certain
data structures in QEMU-KVM were not initialized properly before being
copied to user-space. A privileged host user with access to &quot;/dev/kvm&quot;
could use this flaw to leak kernel stack memory to user-space.
(CVE-2010-3881)

Red Hat would like to thank Vasiliy Kulikov for reporting this issue.

This update also fixes the following bugs:

* The 'kvm_amd' kernel module did not initialize the TSC (Time Stamp
Counter) offset in the VMCB (Virtual Machine Control Block) correctly.
After a vCPU (virtual CPU) has been created, the TSC offset in the VMCB
should have a negative value so that the virtual machine will see TSC
values starting at zero. However, the TSC offset was set to zero and
therefore the virtual machine saw the same TSC value as the host. With this
update, the TSC offset has been updated to show the correct values.
(BZ#656984)

* Setting the boot settings of a virtual machine to, firstly, boot from PXE
and, secondly, to boot from the hard drive would result in a PXE boot loop,
that is, the virtual machine would not continue to boot from the hard drive
if the PXE boot failed. This was caused by a flaw in the 'bochs-bios' (part
of KVM) code. With this update, after a virtual machine tries to boot from
PXE and fails, it continues to boot from a hard drive if there is one
present. (BZ#659850)

* If a 64-bit Red Hat Enterprise Linux 5.5 virtual machine was migrated to
another host with a different CPU clock speed, the clock of that virtual
machine would consistently lose or gain time (approximately half a second
for every second the host is running). On machines that do not use the kvm
clock, the network time protocol daemon (ntpd) could correct the time
drifts caused by migration. However, using the pvclock caused the time to
change consistently. This was due to flaws in the save/load functions of
pvclock. With this update, the issue has been fixed and migrating a virtual
machine no longer causes time drift. (BZ#660239)

All KVM users should upgrade to these updated packages, which contain
backported patches to correct these issues. Note: The procedure in the
Solution section must be performed before this update will take effect.

4. Solution:

Before applying this update, make sure all previously-released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to
use the Red Hat Network to apply this update are available at
<a  rel="nofollow" href="http://kbase.redhat.com/faq/docs/DOC-11259">http://kbase.redhat.com/faq/docs/DOC-11259</a>

The following procedure must be performed before this update will take
effect:

1) Stop all KVM guest virtual machines.

2) Either reboot the hypervisor machine or, as the root user, remove (using
&quot;modprobe -r [module]&quot;) and reload (using &quot;modprobe [module]&quot;) all of the
following modules which are currently running (determined using &quot;lsmod&quot;):
kvm, ksm, kvm-intel or kvm-amd.

3) Restart the KVM guest virtual machines.

5. Bugs fixed (<a  rel="nofollow" href="http://bugzilla.redhat.com/">http://bugzilla.redhat.com/</a>):

649920 - CVE-2010-3881 kvm: arch/x86/kvm/x86.c: reading uninitialized stack memory
656984 - TSC offset of virtual machines is not initialized correctly by 'kvm_amd' kernel module.
659850 - If VM boot seq. is set up as nc (PXE then disk) the VM is always stuck on trying to PXE boot
660239 - clock drift when migrating a guest between mis-matched CPU clock speed

6. Package List:

RHEL Desktop Multi OS (v. 5 client):

Source:
<a  rel="nofollow" href="ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Client/en/os/SRPMS/kvm-83-164.el5_5.30.src.rpm">ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Client/en/os/SRPMS/kvm-83-164.el5_5.30.src.rpm</a>

x86_64:
kmod-kvm-83-164.el5_5.30.x86_64.rpm
kvm-83-164.el5_5.30.x86_64.rpm
kvm-debuginfo-83-164.el5_5.30.x86_64.rpm
kvm-qemu-img-83-164.el5_5.30.x86_64.rpm
kvm-tools-83-164.el5_5.30.x86_64.rpm

RHEL Virtualization (v. 5 server):

Source:
<a  rel="nofollow" href="ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Server/en/os/SRPMS/kvm-83-164.el5_5.30.src.rpm">ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Server/en/os/SRPMS/kvm-83-164.el5_5.30.src.rpm</a>

x86_64:
kmod-kvm-83-164.el5_5.30.x86_64.rpm
kvm-83-164.el5_5.30.x86_64.rpm
kvm-debuginfo-83-164.el5_5.30.x86_64.rpm
kvm-qemu-img-83-164.el5_5.30.x86_64.rpm
kvm-tools-83-164.el5_5.30.x86_64.rpm

These packages are GPG signed by Red Hat for security.  Our key and 
details on how to verify the signature are available from
<a  rel="nofollow" href="https://access.redhat.com/security/team/key/#package">https://access.redhat.com/security/team/key/#package</a>

7. References:

<a  rel="nofollow" href="https://www.redhat.com/security/data/cve/CVE-2010-3881.html">https://www.redhat.com/security/data/cve/CVE-2010-3881.html</a>
<a  rel="nofollow" href="https://access.redhat.com/security/updates/classification/#low">https://access.redhat.com/security/updates/classification/#low</a>

8. Contact:

The Red Hat security contact is &lt;secalert redhat com&gt;.  More contact
details at <a  rel="nofollow" href="https://www.redhat.com/security/team/contact/">https://www.redhat.com/security/team/contact/</a>

Copyright 2010 Red Hat, Inc.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (GNU/Linux)

iD8DBQFND5hNXlSAg2UNWIIRAkf9AJ9c0HaUseSQez9tAXXHDZ9pam3L/QCfQS8s
xKcv+5Vj4dsRtKYVb2kna0w=
=9ki0
-----END PGP SIGNATURE-----


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
[<a href="msg00031.html">Date Prev</a>][<a href="msg00033.html">Date Next</a>] &nbsp; [<a href="msg00031.html">Thread Prev</a>][<a href="msg00033.html">Thread Next</a>] &nbsp; 
[<A HREF="thread.html#00032">Thread Index</A>]
[<A HREF="date.html#00032">Date Index</A>]
[<A HREF="author.html#00032">Author Index</A>]

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!--#include virtual="/footer.html"-->
</body>
</html>

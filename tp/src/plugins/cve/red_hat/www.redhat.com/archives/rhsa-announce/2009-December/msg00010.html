<!-- MHonArc v2.6.12 -->
<!--X-Subject: [RHSA&#45;2009:1659&#45;01] Moderate: kvm security and bug fix update -->
<!--X-From-R13: ohtmvyynNerqung.pbz -->
<!--X-Date: Wed, 9 Dec 2009 11:33:01 &#45;0500 -->
<!--X-Message-Id: 200912091633.nB9GX1xq032330@int&#45;mx04.intmail.prod.int.phx2.redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!--#include virtual="/header.html"-->
<!--#include virtual="/search.html"-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>[RHSA-2009:1659-01] Moderate: kvm security and bug fix update</TITLE>
<LINK REV="made" HREF="mailto:bugzilla@redhat.com">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<a href="msg00009.html">Date Prev</a>][<a href="msg00011.html">Date Next</a>] &nbsp; [<a href="msg00009.html">Thread Prev</a>][<a href="msg00011.html">Thread Next</a>] &nbsp; 
[<A HREF="thread.html#00010">Thread Index</A>]
[<A HREF="date.html#00010">Date Index</A>]
[<A HREF="author.html#00010">Author Index</A>]

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[RHSA-2009:1659-01] Moderate: kvm security and bug fix update</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>From</em>: bugzilla redhat com</li>
<li><em>To</em>: rhsa-announce redhat com, enterprise-watch-list redhat com</li>
<li><em>Cc</em>: </li>
<li><em>Subject</em>: [RHSA-2009:1659-01] Moderate: kvm security and bug fix update</li>
<li><em>Date</em>: Wed, 9 Dec 2009 11:33:01 -0500</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

=====================================================================
                   Red Hat Security Advisory

Synopsis:          Moderate: kvm security and bug fix update
Advisory ID:       RHSA-2009:1659-01
Product:           Red Hat Enterprise Linux
Advisory URL:      <a  rel="nofollow" href="https://rhn.redhat.com/errata/RHSA-2009-1659.html">https://rhn.redhat.com/errata/RHSA-2009-1659.html</a>
Issue date:        2009-12-09
CVE Names:         CVE-2009-4031 
=====================================================================

1. Summary:

Updated kvm packages that fix one security issue and several bugs are now
available for Red Hat Enterprise Linux 5.

This update has been rated as having moderate security impact by the Red
Hat Security Response Team.

2. Relevant releases/architectures:

RHEL Desktop Multi OS (v. 5 client) - x86_64
RHEL Virtualization (v. 5 server) - x86_64

3. Description:

KVM (Kernel-based Virtual Machine) is a full virtualization solution for
Linux on AMD64 and Intel 64 systems. KVM is a Linux kernel module built for
the standard Red Hat Enterprise Linux kernel.

On x86 platforms, the do_insn_fetch() function did not limit the amount of
instruction bytes fetched per instruction. Users in guest operating systems
could leverage this flaw to cause large latencies on SMP hosts that could
lead to a local denial of service on the host operating system. This
update fixes this issue by imposing the architecturally-defined 15 byte
length limit for instructions. (CVE-2009-4031)

This update also fixes the following bugs:

* performance problems occurred when using the qcow2 image format with the
qemu-kvm -drive &quot;cache=none&quot; option (the default setting when not specified
otherwise). This could cause guest operating system installations to take
hours. With this update, performance patches have been backported so that
using the qcow2 image format with the &quot;cache=none&quot; option no longer causes
performance issues. (BZ#520693)

* when using the virtual vm8086 mode, bugs in the emulated hardware task
switching implementation may have, in some situations, caused older guest
operating systems to malfunction. (BZ#532031)

* Windows Server 2003 guests (32-bit) with more than 4GB of memory may have
crashed during reboot when using the default qemu-kvm CPU settings.
(BZ#532043)

* with Red Hat Enterprise Virtualization, guests continued to run after
encountering disk read errors. This could have led to their file systems
becoming corrupted (but not the host's), notably in environments that use
networked storage. With this update, the qemu-kvm -drive &quot;werror=stop&quot;
option now applies not only to write errors but also to read errors: When
using this option, guests will pause on disk read and write errors.

By default, guests managed by Red Hat Enterprise Virtualization use the
&quot;werror=stop&quot; option. This option is not used by default for guests managed
by libvirt. (BZ#537334, BZ#540406)

* the para-virtualized block driver (virtio-blk) silently ignored read
errors when accessing disk images. With this update, the driver correctly
signals the read error to the guest. (BZ#537334)

All KVM users should upgrade to these updated packages, which contain
backported patches to resolve these issues. Note: The procedure in the
Solution section must be performed before this update will take effect.

4. Solution:

Before applying this update, make sure that all previously-released
errata relevant to your system have been applied.

This update is available via Red Hat Network. Details on how to use
the Red Hat Network to apply this update are available at
<a  rel="nofollow" href="http://kbase.redhat.com/faq/docs/DOC-11259">http://kbase.redhat.com/faq/docs/DOC-11259</a>

The following procedure must be performed before this update will take
effect:

1) Stop all KVM guest virtual machines.

2) Either reboot the hypervisor machine or, as the root user, remove (using
&quot;modprobe -r [module]&quot;) and reload (using &quot;modprobe [module]&quot;) all of the
following modules which are currently running (determined using &quot;lsmod&quot;):
kvm, ksm, kvm-intel or kvm-amd.

3) Restart the KVM guest virtual machines.

5. Bugs fixed (<a  rel="nofollow" href="http://bugzilla.redhat.com/">http://bugzilla.redhat.com/</a>):

532031 - KVM does not implement proper support for hardware task linking when using vm8086 mode
532043 - qemu aborted when restart 32bitwin23k with more than 4G mem in intel host.
537334 - O/S Filesystem Corruption with RHEL-5.4 on a RHEV Guest
540406 - RHEL5.4 VM image corruption with an IDE v-disk
541160 - CVE-2009-4031 kernel: KVM: x86 emulator: limit instructions to 15 bytes

6. Package List:

RHEL Desktop Multi OS (v. 5 client):

Source:
<a  rel="nofollow" href="ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Client/en/os/SRPMS/kvm-83-105.el5_4.13.src.rpm">ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Client/en/os/SRPMS/kvm-83-105.el5_4.13.src.rpm</a>

x86_64:
kmod-kvm-83-105.el5_4.13.x86_64.rpm
kvm-83-105.el5_4.13.x86_64.rpm
kvm-debuginfo-83-105.el5_4.13.x86_64.rpm
kvm-qemu-img-83-105.el5_4.13.x86_64.rpm
kvm-tools-83-105.el5_4.13.x86_64.rpm

RHEL Virtualization (v. 5 server):

Source:
<a  rel="nofollow" href="ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Server/en/os/SRPMS/kvm-83-105.el5_4.13.src.rpm">ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Server/en/os/SRPMS/kvm-83-105.el5_4.13.src.rpm</a>

x86_64:
kmod-kvm-83-105.el5_4.13.x86_64.rpm
kvm-83-105.el5_4.13.x86_64.rpm
kvm-debuginfo-83-105.el5_4.13.x86_64.rpm
kvm-qemu-img-83-105.el5_4.13.x86_64.rpm
kvm-tools-83-105.el5_4.13.x86_64.rpm

These packages are GPG signed by Red Hat for security.  Our key and 
details on how to verify the signature are available from
<a  rel="nofollow" href="https://www.redhat.com/security/team/key/#package">https://www.redhat.com/security/team/key/#package</a>

7. References:

<a  rel="nofollow" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-4031">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2009-4031</a>
<a  rel="nofollow" href="http://www.redhat.com/security/updates/classification/#moderate">http://www.redhat.com/security/updates/classification/#moderate</a>

8. Contact:

The Red Hat security contact is &lt;secalert redhat com&gt;.  More contact
details at <a  rel="nofollow" href="https://www.redhat.com/security/team/contact/">https://www.redhat.com/security/team/contact/</a>

Copyright 2009 Red Hat, Inc.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (GNU/Linux)

iD8DBQFLH9EXXlSAg2UNWIIRAv8oAJ9Q0eSSPCDZPXVjH6R4lwDjJGM/NwCfe126
QRjKPSU1gAQ8mEBAN03qm70=
=Y+Un
-----END PGP SIGNATURE-----


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
[<a href="msg00009.html">Date Prev</a>][<a href="msg00011.html">Date Next</a>] &nbsp; [<a href="msg00009.html">Thread Prev</a>][<a href="msg00011.html">Thread Next</a>] &nbsp; 
[<A HREF="thread.html#00010">Thread Index</A>]
[<A HREF="date.html#00010">Date Index</A>]
[<A HREF="author.html#00010">Author Index</A>]

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!--#include virtual="/footer.html"-->
</body>
</html>

<!-- MHonArc v2.6.16 -->
<!--X-Subject: [RHSA&#45;2013:1754&#45;01] Important: qemu&#45;kvm&#45;rhev, qemu&#45;kvm&#45;rhev&#45;tools,	qemu&#45;img&#45;rhev security and bug fix update -->
<!--X-From-R13: ohtmvyynNerqung.pbz -->
<!--X-Date: Thu, 21 Nov 2013 00:52:49 &#45;0500 -->
<!--X-Message-Id: 201311210552.rAL5qlOE030848@int&#45;mx09.intmail.prod.int.phx2.redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!--#include virtual="/header.html"-->
<!--#include virtual="/search.html"-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>[RHSA-2013:1754-01] Important: qemu-kvm-rhev, qemu-kvm-rhev-tools,	qemu-</TITLE>
<LINK REV="made" HREF="mailto:bugzilla redhat com">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<a href="msg00038.html">Date Prev</a>][<a href="msg00040.html">Date Next</a>] &nbsp; [<a href="msg00038.html">Thread Prev</a>][<a href="msg00040.html">Thread Next</a>] &nbsp; 
[<A HREF="thread.html#00039">Thread Index</A>]
[<A HREF="date.html#00039">Date Index</A>]
[<A HREF="author.html#00039">Author Index</A>]

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[RHSA-2013:1754-01] Important: qemu-kvm-rhev, qemu-kvm-rhev-tools,	qemu-img-rhev security and bug fix update</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>From</em>: bugzilla redhat com</li>
<li><em>To</em>: rhsa-announce redhat com, rhev-watch-list redhat com</li>
<li><em>Subject</em>: [RHSA-2013:1754-01] Important: qemu-kvm-rhev, qemu-kvm-rhev-tools,	qemu-img-rhev security and bug fix update</li>
<li><em>Date</em>: Thu, 21 Nov 2013 05:56:19 +0000</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

=====================================================================
                   Red Hat Security Advisory

Synopsis:          Important: qemu-kvm-rhev, qemu-kvm-rhev-tools, qemu-img-rhev security and bug fix update
Advisory ID:       RHSA-2013:1754-01
Product:           Red Hat Enterprise Virtualization
Advisory URL:      <a  rel="nofollow" href="https://rhn.redhat.com/errata/RHSA-2013-1754.html">https://rhn.redhat.com/errata/RHSA-2013-1754.html</a>
Issue date:        2013-11-21
CVE Names:         CVE-2013-4344 
=====================================================================

1. Summary:

Updated qemu-kvm-rhev, qemu-kvm-rhev-tools, and qemu-img-rhev packages are
now available.

The Red Hat Security Response Team has rated this update as having
important security impact. A Common Vulnerability Scoring System (CVSS)
base score, which gives a detailed severity rating, is available from the
CVE link in the References section.

2. Relevant releases/architectures:

RHEV Agents (vdsm) - x86_64

3. Description:

KVM (Kernel-based Virtual Machine) is a full virtualization solution for
Linux on AMD64 and Intel 64 systems. The qemu-kvm-rhev package provides the
user-space component for running virtual machines using KVM, in
environments managed by Red Hat Enterprise Virtualization Manager.

A buffer overflow flaw was found in the way QEMU processed the SCSI &quot;REPORT
LUNS&quot; command when more than 256 LUNs were specified for a single SCSI
target. A privileged guest user could use this flaw to corrupt QEMU process
memory on the host, which could potentially result in arbitrary code
execution on the host with the privileges of the QEMU process.
(CVE-2013-4344)

This issue was discovered by Asias He of Red Hat.

This update fixes the following bugs:

* In QMP monitor, if an attempt was made to create an image with the same
file name as the backing file, an error was generated, but no message was
displayed. Performing this action in QMP Monitor now generates the same
error message as performing the action in HMP: &quot;Error: Trying to create an
image with the same file name as the backing file&quot;. (BZ#877240)

* QEMU I/O throttling has been disabled in Red Hat Enterprise Linux and is
now only available enabled in the Red Hat Enterprise Virtualization QEMU
package (qemu-kvm-rhev). (BZ#975468)

* When booting a guest machine, it would still boot when specifying iops
and bps as a negative value, without displaying an error message. This has
been fixed so that if a negative value is used the guest does not boot and
QEMU exits with the following message 'bps and iops values must be 0 or
greater'. (BZ#987725)

* When booting a guest with QMP server, hot plug was failing. It can now do
hotplug with QEMU I/O throttling including iops, iops_wr, iops_rd, bps,
bps_wr, bps_rd inofs successfully. (BZ#987745)

* Due to a change in virtualization features, all fixes and errata related
to Red Hat Enterprise Virtualization specific features, can only be posted
to the Red Hat Enterprise Virtualization channel. Therefore a Red Hat
Enterprise Virtualization specific qemu-kvm (for RHEV-H-6.5.0 Errata) was
developed. This meant that the qemu-kvm-rhev binary was mapped to a Red Had
enterprise Virtualization channel, entitled to Red Hat Enterprise
Virtualization customers, and disabled from the Red Hat Enterprise Linux
channel. (BZ#997032)

* The qemu-kvm-rhev package now contains /usr/lib64/qemu, as this directory
is where CEPH packages provide librbd to be used by QEMU at runtime.
(BZ#999705)

* QEMU performed a core dump when iops.bps was set to a negative value.
This has been fixed so that it no longer performs a core dump when a
negative value is entered, instead an error message is displayed indicating
the values must be zero of greater. (BZ#1001436)

* When running the &quot;rpm -V qemu-kvm-rhev&quot; command, an error was generated
stating there were unsatisfied dependencies. This has been fixed so there
now are no unsatisfied dependencies and it executes correctly. (BZ#1010930)

In addition, this update adds the following enhancements:

* QEMU I/O throttling allows for finer control of the rate of I/O
operations at the QEMU level, and is therefore independent of the
underlying storage device. A similar feature can be created by using
cgroups at the libvirt level, but cgroups is limited as it does not support
some storage devices (such as image files over NFS) and throttles the whole
virtual machine, including access to meta-data, while qemu I/O is more
fine-grained. (BZ#956825)

* Patches were added to the QEMU block driver for accessing CEPH storage on
qemu-kvm-rhev. However,this is not usable on its own, a librbd library
still needs to be provided. The librbd library is not provided in Red Hat
Enterprise Linux and will be handled by a third party source. (BZ#988079)

4. Solution:

All Red Hat Enterprise Virtualization users with deployed virtualization
hosts are advised to install these updated packages, which contain
backported patches to correct these issues and add these enhancements.

Before applying this update, make sure all previously-released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to
use the Red Hat Network to apply this update are available at
<a  rel="nofollow" href="https://access.redhat.com/site/articles/11258">https://access.redhat.com/site/articles/11258</a>

5. Bugs fixed (<a  rel="nofollow" href="https://bugzilla.redhat.com/">https://bugzilla.redhat.com/</a>):

877240 - QMP: improve error message for blockdev-snapshot-sync failure
987725 - Guest should failed to be booted if specifying iops,bps as negative value
987745 - fail to do hotplug with qemu i/o throttling including iops,iops_wr,iops_rd,bps,bps_wr,bps_rd inofs
1001436 - Qemu core dumped when set iops,bps... to a negative value var monitor
1007330 - CVE-2013-4344 qemu: buffer overflow in scsi_target_emulate_report_luns
1010930 - Qemu-kvm-rhev build verifytest failed (rpm -V)

6. Package List:

RHEV Agents (vdsm):

Source:
<a  rel="nofollow" href="ftp://ftp.redhat.com/pub/redhat/linux/enterprise/6Server/en/RHEV/SRPMS/qemu-kvm-rhev-0.12.1.2-2.415.el6.src.rpm">ftp://ftp.redhat.com/pub/redhat/linux/enterprise/6Server/en/RHEV/SRPMS/qemu-kvm-rhev-0.12.1.2-2.415.el6.src.rpm</a>

x86_64:
qemu-img-rhev-0.12.1.2-2.415.el6.x86_64.rpm
qemu-kvm-rhev-0.12.1.2-2.415.el6.x86_64.rpm
qemu-kvm-rhev-debuginfo-0.12.1.2-2.415.el6.x86_64.rpm
qemu-kvm-rhev-tools-0.12.1.2-2.415.el6.x86_64.rpm

These packages are GPG signed by Red Hat for security.  Our key and
details on how to verify the signature are available from
<a  rel="nofollow" href="https://access.redhat.com/security/team/key/#package">https://access.redhat.com/security/team/key/#package</a>

7. References:

<a  rel="nofollow" href="https://www.redhat.com/security/data/cve/CVE-2013-4344.html">https://www.redhat.com/security/data/cve/CVE-2013-4344.html</a>
<a  rel="nofollow" href="https://access.redhat.com/security/updates/classification/#important">https://access.redhat.com/security/updates/classification/#important</a>

8. Contact:

The Red Hat security contact is &lt;secalert redhat com&gt;.  More contact
details at <a  rel="nofollow" href="https://access.redhat.com/security/team/contact/">https://access.redhat.com/security/team/contact/</a>

Copyright 2013 Red Hat, Inc.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (GNU/Linux)

iD8DBQFSjZ+pXlSAg2UNWIIRAtSvAJ9Nb3t14AO5A8o+ROOiDxzwgKGE7ACfYH1I
xW7l3j1WXgY57VP2EdeUHs4=
=aUb8
-----END PGP SIGNATURE-----


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
[<a href="msg00038.html">Date Prev</a>][<a href="msg00040.html">Date Next</a>] &nbsp; [<a href="msg00038.html">Thread Prev</a>][<a href="msg00040.html">Thread Next</a>] &nbsp; 
[<A HREF="thread.html#00039">Thread Index</A>]
[<A HREF="date.html#00039">Date Index</A>]
[<A HREF="author.html#00039">Author Index</A>]

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!--#include virtual="/footer.html"-->
</body>
</html>

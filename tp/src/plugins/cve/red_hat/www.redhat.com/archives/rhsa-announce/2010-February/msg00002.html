<!-- MHonArc v2.6.16 -->
<!--X-Subject: [RHSA&#45;2010:0088&#45;02] Important: kvm security and bug fix update -->
<!--X-From-R13: ohtmvyynNerqung.pbz -->
<!--X-Date: Tue, 9 Feb 2010 07:14:18 &#45;0500 -->
<!--X-Message-Id: 201002091214.o19CECtG031269@int&#45;mx04.intmail.prod.int.phx2.redhat.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!--#include virtual="/header.html"-->
<!--#include virtual="/search.html"-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>[RHSA-2010:0088-02] Important: kvm security and bug fix update</TITLE>
<LINK REV="made" HREF="mailto:bugzilla redhat com">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<a href="msg00001.html">Date Prev</a>][<a href="msg00003.html">Date Next</a>] &nbsp; [<a href="msg00001.html">Thread Prev</a>][<a href="msg00003.html">Thread Next</a>] &nbsp; 
[<A HREF="thread.html#00002">Thread Index</A>]
[<A HREF="date.html#00002">Date Index</A>]
[<A HREF="author.html#00002">Author Index</A>]

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[RHSA-2010:0088-02] Important: kvm security and bug fix update</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>From</em>: bugzilla redhat com</li>
<li><em>To</em>: rhsa-announce redhat com, enterprise-watch-list redhat com</li>
<li><em>Subject</em>: [RHSA-2010:0088-02] Important: kvm security and bug fix update</li>
<li><em>Date</em>: Tue, 9 Feb 2010 07:14:12 -0500</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

=====================================================================
                   Red Hat Security Advisory

Synopsis:          Important: kvm security and bug fix update
Advisory ID:       RHSA-2010:0088-02
Product:           Red Hat Enterprise Linux
Advisory URL:      <a  rel="nofollow" href="https://rhn.redhat.com/errata/RHSA-2010-0088.html">https://rhn.redhat.com/errata/RHSA-2010-0088.html</a>
Issue date:        2010-02-09
CVE Names:         CVE-2010-0297 CVE-2010-0298 CVE-2010-0306 
                   CVE-2010-0309 
=====================================================================

1. Summary:

Updated kvm packages that fix multiple security issues and several bugs are
now available for Red Hat Enterprise Linux 5.

This update has been rated as having important security impact by the Red
Hat Security Response Team.

2. Relevant releases/architectures:

RHEL Desktop Multi OS (v. 5 client) - x86_64
RHEL Virtualization (v. 5 server) - x86_64

3. Description:

KVM (Kernel-based Virtual Machine) is a full virtualization solution for
Linux on AMD64 and Intel 64 systems. KVM is a Linux kernel module built for
the standard Red Hat Enterprise Linux kernel.

The x86 emulator implementation was missing a check for the Current
Privilege Level (CPL) and I/O Privilege Level (IOPL). A user in a guest
could leverage these flaws to cause a denial of service (guest crash) or
possibly escalate their privileges within that guest. (CVE-2010-0298,
CVE-2010-0306)

A flaw was found in the Programmable Interval Timer (PIT) emulation. Access
to the internal data structure pit_state, which represents the data state
of the emulated PIT, was not properly validated in the pit_ioport_read()
function. A privileged guest user could use this flaw to crash the host.
(CVE-2010-0309)

A flaw was found in the USB passthrough handling code. A specially-crafted
USB packet sent from inside a guest could be used to trigger a buffer
overflow in the usb_host_handle_control() function, which runs under the
QEMU-KVM context on the host. A user in a guest could leverage this flaw to
cause a denial of service (guest hang or crash) or possibly escalate their
privileges within the host. (CVE-2010-0297)

This update also fixes the following bugs: 

* pvclock MSR values were not preserved during remote migration, causing
time drift for guests. (BZ#537028)

* SMBIOS table 4 data is now generated for Windows guests. (BZ#545874)

* if the qemu-kvm &quot;-net user&quot; option was used, unattended Windows XP
installations did not receive an IP address after reboot. (BZ#546562)

* when being restored from migration, a race condition caused Windows
Server 2008 R2 guests to hang during shutdown. (BZ#546563)

* the kernel symbol checking on the kvm-kmod build process has a safety
check for ABI changes. (BZ#547293)

* on hosts without high-res timers, Windows Server 2003 guests experienced
significant time drift. (BZ#547625)

* in some situations, installing Windows Server 2008 R2 from an ISO image
resulted in a blue screen &quot;BAD_POOL_HEADER&quot; stop error. (BZ#548368)

* a bug in the grow_refcount_table() error handling caused infinite
recursion in some cases. This caused the qemu-kvm process to hang and
eventually crash. (BZ#552159)

* for Windows Server 2003 R2, Service Pack 2, 32-bit guests, an &quot;unhandled
vm exit&quot; error could occur during reboot on some systems. (BZ#552518)

* for Windows guests, QEMU could attempt to stop a stopped audio device,
resulting in a &quot;snd_playback_stop: ASSERT playback_channel-&gt;base.active
failed&quot; error. (BZ#552519)

* the Hypercall driver did not reset the device on power-down. (BZ#552528)

* mechanisms have been added to make older savevm versions to be emitted in
some cases. (BZ#552529)

* an error in the Makefile prevented users from using the source RPM to
install KVM. (BZ#552530)

* guests became unresponsive and could use up to 100% CPU when running
certain benchmark tests with more than 7 guests running simultaneously.
(BZ#553249)

* QEMU could terminate randomly with virtio-net and SMP enabled.
(BZ#561022)

All KVM users should upgrade to these updated packages, which contain
backported patches to resolve these issues. Note: The procedure in the
Solution section must be performed before this update will take effect.

4. Solution:

Before applying this update, make sure all previously-released errata
relevant to your system have been applied.

This update is available via the Red Hat Network. Details on how to
use the Red Hat Network to apply this update are available at
<a  rel="nofollow" href="http://kbase.redhat.com/faq/docs/DOC-11259">http://kbase.redhat.com/faq/docs/DOC-11259</a>

The following procedure must be performed before this update will take
effect:

1) Stop all KVM guest virtual machines.

2) Either reboot the hypervisor machine or, as the root user, remove (using
&quot;modprobe -r [module]&quot;) and reload (using &quot;modprobe [module]&quot;) all of the
following modules which are currently running (determined using &quot;lsmod&quot;):
kvm, ksm, kvm-intel or kvm-amd.

3) Restart the KVM guest virtual machines.

5. Bugs fixed (<a  rel="nofollow" href="http://bugzilla.redhat.com/">http://bugzilla.redhat.com/</a>):

537028 - pvclock msr values are not preserved across remote migration
545874 - Need to generate SMBIOS table 4 data for windows guests
546562 - Windows XP unattended install doesn't get an IP address after rebooting, if using -net user
546563 - Windows Server 2008 R2 shutdown hangs after restore from migration
547293 - kvm kmod package should filter only some specific ksym dependencies
547625 - time drift in win2k364 KVM guest
548368 - BSOD BAD_POOL_HEADER STOP 0x19 during boot of Windows Server 2008 R2 installer
552159 - qcow2: infinite recursion on grow_refcount_table() error handling
552518 - Rhev-Block driver causes  'unhandled vm exit' with 32bit win2k3r2sp2 Guest VM  on restart
552519 - KVM : QEMU-Audio attempting to stop unactivated audio device (snd_playback_stop: ASSERT playback_channel-&gt;base.active failed).
552528 - Hypercall driver doesn't reset device on power-down
552529 - kvm: migration: mechanism to make older savevm versions to be emitted on some cases
552530 - Build tree for RHEL 5.X and RHEL 5.4.z contains build bugs
553249 - hypercall device - Vm becomes non responsive on Sysmark benchmark (when more than 7 vm's running simultaneously)
557025 - CVE-2010-0297 kvm-userspace-rhel5: usb-linux.c: fix buffer overflow
559091 - CVE-2010-0298 kvm: emulator privilege escalation
560654 - CVE-2010-0306 kvm: emulator privilege escalation IOPL/CPL level check
560887 - CVE-2010-0309 kvm: cat /dev/port in guest cause the host hang
561022 - QEMU terminates without warning with virtio-net and SMP enabled

6. Package List:

RHEL Desktop Multi OS (v. 5 client):

Source:
<a  rel="nofollow" href="ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Client/en/os/SRPMS/kvm-83-105.el5_4.22.src.rpm">ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Client/en/os/SRPMS/kvm-83-105.el5_4.22.src.rpm</a>

x86_64:
kmod-kvm-83-105.el5_4.22.x86_64.rpm
kvm-83-105.el5_4.22.x86_64.rpm
kvm-debuginfo-83-105.el5_4.22.x86_64.rpm
kvm-qemu-img-83-105.el5_4.22.x86_64.rpm
kvm-tools-83-105.el5_4.22.x86_64.rpm

RHEL Virtualization (v. 5 server):

Source:
<a  rel="nofollow" href="ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Server/en/os/SRPMS/kvm-83-105.el5_4.22.src.rpm">ftp://ftp.redhat.com/pub/redhat/linux/enterprise/5Server/en/os/SRPMS/kvm-83-105.el5_4.22.src.rpm</a>

x86_64:
kmod-kvm-83-105.el5_4.22.x86_64.rpm
kvm-83-105.el5_4.22.x86_64.rpm
kvm-debuginfo-83-105.el5_4.22.x86_64.rpm
kvm-qemu-img-83-105.el5_4.22.x86_64.rpm
kvm-tools-83-105.el5_4.22.x86_64.rpm

These packages are GPG signed by Red Hat for security.  Our key and 
details on how to verify the signature are available from
<a  rel="nofollow" href="https://www.redhat.com/security/team/key/#package">https://www.redhat.com/security/team/key/#package</a>

7. References:

<a  rel="nofollow" href="https://www.redhat.com/security/data/cve/CVE-2010-0297.html">https://www.redhat.com/security/data/cve/CVE-2010-0297.html</a>
<a  rel="nofollow" href="https://www.redhat.com/security/data/cve/CVE-2010-0298.html">https://www.redhat.com/security/data/cve/CVE-2010-0298.html</a>
<a  rel="nofollow" href="https://www.redhat.com/security/data/cve/CVE-2010-0306.html">https://www.redhat.com/security/data/cve/CVE-2010-0306.html</a>
<a  rel="nofollow" href="https://www.redhat.com/security/data/cve/CVE-2010-0309.html">https://www.redhat.com/security/data/cve/CVE-2010-0309.html</a>
<a  rel="nofollow" href="http://www.redhat.com/security/updates/classification/#important">http://www.redhat.com/security/updates/classification/#important</a>

8. Contact:

The Red Hat security contact is &lt;secalert redhat com&gt;.  More contact
details at <a  rel="nofollow" href="https://www.redhat.com/security/team/contact/">https://www.redhat.com/security/team/contact/</a>

Copyright 2010 Red Hat, Inc.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.4 (GNU/Linux)

iD8DBQFLcVE6XlSAg2UNWIIRAsHiAKCpFKlrXkv7nFrGY+XEEzvaZOGxKgCfQ4CI
LsIFiaziOI+yk3BCqvgg0hU=
=YAWH
-----END PGP SIGNATURE-----


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
[<a href="msg00001.html">Date Prev</a>][<a href="msg00003.html">Date Next</a>] &nbsp; [<a href="msg00001.html">Thread Prev</a>][<a href="msg00003.html">Thread Next</a>] &nbsp; 
[<A HREF="thread.html#00002">Thread Index</A>]
[<A HREF="date.html#00002">Date Index</A>]
[<A HREF="author.html#00002">Author Index</A>]

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
<!--#include virtual="/footer.html"-->
</body>
</html>
